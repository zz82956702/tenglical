<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>計算機</title>
    <style>
        body {
            background-color: #738A6E;
            justify-content: center;
            padding-bottom: 100px;
        }
        .frame {
            display: flex;
            justify-content: space-between; /* 在子元素之間添加間隔 */
            /* flex-wrap: wrap; /* 如果子元素過多，則換行 */
            /* gap: 1px; 子元素之間的間隔 */ 
            font-size: 30px;
        }
        .box {
            background-color: #BFCFBB;
            height: 100px;
            width: 50%;
            padding: 10px;
            margin-top:5px;
            text-align: center;
            border-radius: 20px;
            border: 6px solid #344C3D;
            font-size: 22px;
            color: #414833;
            font-weight: bold;

        }
        #product22{
            color: #414833;
            font-size: 22px;
            width: 41%;
            height: 100px;
            font-weight: bold;
        }
        .total {
            /* border-radius:10px;
            display: flex;
            border-radius: 15px;
            color: #344C3D;*/
            justify-content: space-between;
            display: flex;
            color: #344C3D;
            position: fixed; /* 固定位置 */
            bottom: 0; /* 固定在底部 */
            width: 100%; /* 佔滿寬度 */
            background-color: #738A6E; /* 背景顏色 */
            padding: 5px 5px; /* 內邊距 */
            font-weight: bold;
            align-items: center;
            justify-content: center;
            /* border-radius: 5px; */
        }
        .totalAmount, .totalPrice, .totalPV {
            font-size: 25px;
            display: flex;
            width: 30%;
            background-color: #738A6E;
            color: white;
            font-family: Arial, sans-serif;
            justify-content: center; /* 水平居中 */
            align-items: center; /* 垂直居中 */
            text-align: center; /* 確保多行文字也居中 */
        }
        .decrement, .increment {
            height: 30px;
            width: 30px;
            font-size: 20px; /* 調整按鈕內文字的大小 */
            vertical-align: middle;
            font-weight: bold;
        }
        .number {
            display: inline-block;
            vertical-align: middle;
            margin: 0 10px; /* 調整數字與按鈕之間的間距 */
        }
        .extra-charge-container {
            justify-content: space-between;
            display: flex;
            align-items: center;
            margin-top: 10px;
            background-color: #738A6E;
            height: 80px;
            width: 100%;
            position: sticky; /* 使用 sticky 位置 */
            top: 0; /* 固定在頁首 */
            z-index: 1000; /* 確保在其他內容之上 */
        }

        .extra-charge-container div {
            width: 50%;
            display: flex;
            font-size: 25px; /* 調整字體大小 */
            font-family: Arial, sans-serif; /* 確保字體一致 */
            color: white; /* 確保文字顏色與背景對比 */
        }

        .extra-charge-container input[type="checkbox"] {
            transform: scale(2); /* 放大 checkbox */
            margin-right: 10px; /* 調整與文字的間距 */
        }

        .clear-button {
            padding: 10px 20px;
            font-size: 25px;
            background-color: #344C3D;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: Arial, sans-serif;
            box-shadow: 5px 5px black;
        }
        .content1, .content2{
            align-items: center;
            justify-content: center; /* 水平居中 */
        }
        .content1{
            padding: 10px 20px;
        }
        .title{
            padding-top: 15px;
            font-size: 30px;
            font-family: Arial, sans-serif;
            color: white;
            text-align: center;
            font-weight: bold;
            height: 60px;
            width: 100%;
            background-color: #344C3D;
            border-radius: 10px;
            /* outline: thick ridge black; */
            box-shadow: 5px 5px black;
        }
        
    </style>
</head>
<body>
    <div class="title">試算表</div>
    <div class="extra-charge-container">
        <div class="content1">
        <input type="checkbox" id="extraChargeCheckbox">
        入會費
        </div> 
        
        <div class="content2">
        <button class="clear-button" id="clearButton">清除</button>
        </div>
    </div>

    <div class="frame">
        <div class="box" data-index="0">
            <div class="product">A1-深層潔膚油</div>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>

        <div class="box" data-index="1">
            <div class="product">01-雙效潔顏露</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>
    </div>
    <div class="frame">
        <div class="box" data-index="2">
            <div class="product">02-平衡柔膚露</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>

        <div class="box" data-index="3">
            <div class="product">03-全效緊緻眼霜</div>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>
    </div>
    <div class="frame">
        <div class="box" data-index="4">
            <div class="product">04-煥白精華霜</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>

        <div class="box" data-index="5">
            <div class="product">05-均衡調理霜</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>
    </div>
    <div class="frame">
        <div class="box" data-index="6">
            <div class="product">6A-亮白防護霜</div>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>

        <div class="box" data-index="7">
            <div class="product">6B-潤白防護霜</div>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>
    </div>
    <div class="frame">
        <div class="box" data-index="8">
            <div class="product">08-賦活菁華霜</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>

        <div class="box" data-index="9">
            <div class="product">09-保濕修護霜</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>
    </div>
    <div class="frame">
        <div class="box" data-index="10">
            <div class="product">10-瞬效亮麗精純C液</div>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>

        <div class="box" data-index="11">
            <div class="product">12-煥彩青春露</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>
    </div>
    <div class="frame">
        <div class="box" data-index="12">
            <div class="product">BIO面膜</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>

        <div class="box" data-index="13">
            <div class="product">C粉(瓶)</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>
    </div>
    <div class="frame">
        <div class="box" data-index="14">
            <div class="product">C粉(盒)</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>

        <div class="box" data-index="15">
            <div class="product">青春元素-F</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>
    </div>
    <div class="frame">
        <div class="box" data-index="16">
            <div class="product">亮采元素-L</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>

        <div class="box" data-index="17">
            <div class="product">纖麗365</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>
    </div>
    <div class="frame">
        <div class="box" data-index="18">
            <div class="product">纖麗365-S1</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>

        <div class="box" data-index="19">
            <div class="product">橄欖油</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>
    </div>
    <div class="frame">
        <div class="box" data-index="20">
            <div class="product">紅蔘精華飲</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>

        <div class="box" data-index="21">
            <div class="product">麗穩康奶粉</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>
    </div>
    <div>
        <div id="product22" class="box" data-index="22">
            <div class="product">麗穩膳奶粉</div>
            <br>
            <button class="decrement">-</button>
            <span class="number">0</span>
            <button class="increment">+</button>
        </div>
<br>
    <!-- 新增顯示總價的div -->
    <div class="total">
    <div class="totalAmount" id="totalPVAmountDisplay"></div>
    <div class="totalPrice" id="totalPriceDisplay"></div>
    <div class="totalPV" id="totalPVDisplay"></div>
    </div>


    <script>
        const boxes = document.querySelectorAll('.box');
        const totalPriceDisplay = document.getElementById('totalPriceDisplay');
        const totalPVDisplay = document.getElementById('totalPVDisplay');
        const totalPVAmountDisplay = document.getElementById('totalPVAmountDisplay');
        const extraChargeCheckbox = document.getElementById('extraChargeCheckbox');
        const clearButton = document.getElementById('clearButton');

        let currentNumbers = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        const prices = [1995, 1995, 1995, 3990, 4200, 4200, 3990, 3990, 3990, 2415, 3465, 2415, 2415, 3465, 29400, 1995, 1995, 2625, 2625, 3210, 3210, 3210, 3210];
        const PVs = [1700, 1700, 1700, 3500, 3600, 3600, 3500, 3500, 3500, 1800, 3000, 1800, 1800, 3000, 26000, 1700, 1700, 2300, 2300, 2400, 2400, 2200, 2200];
        let extraChargeTotal= 0;
        
        function updateNumberDisplay() {
            boxes.forEach((box, index) => {
                const numberElement = box.querySelector('.number');
                numberElement.textContent = currentNumbers[index];
            });
            updateTotalPrice();
        }

        function updateTotalPrice() {
            const totalPrice = currentNumbers.reduce((sum, num, index) => sum + num * prices[index], 0)+ extraChargeTotal;
            totalPriceDisplay.innerHTML = `合計<br>${totalPrice}`;
            const totalPV = currentNumbers.reduce((sum, num, index) => sum + num * PVs[index], 0);
            totalPVDisplay.innerHTML = `PV<br>${totalPV}`;
            const totalPVAmount = currentNumbers.reduce((sum, num) => sum + num, 0);
            totalPVAmountDisplay.innerHTML = `總數量<br>${totalPVAmount}`
        }

        boxes.forEach((box, index) => {
            box.querySelector('.increment').addEventListener('click', () => {
                currentNumbers[index] += 1;
                updateNumberDisplay();
            });

            box.querySelector('.decrement').addEventListener('click', () => {
                if (currentNumbers[index] > 0) {
                currentNumbers[index] -= 1;
                updateNumberDisplay();
                }
            });
        });

        extraChargeCheckbox.addEventListener('change', () => {
            if (extraChargeCheckbox.checked) {
                extraChargeTotal += 1000;
            } else {
                extraChargeTotal -= 1000;
            }
            updateTotalPrice();
        });

        clearButton.addEventListener('click', () => {
            currentNumbers = currentNumbers.map(() => 0);
            extraChargeCheckbox.checked = false;
            extraChargeTotal = 0;
            updateNumberDisplay();
        });

        updateNumberDisplay();
    </script>
</body>
</html>
